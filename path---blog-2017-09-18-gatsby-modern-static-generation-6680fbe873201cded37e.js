webpackJsonp([6811935783233],{576:function(e,t){e.exports={data:{markdownRemark:{html:'<p>In this post, I will talk about static site generators — how they have evolved and why I switched from a <a href="https://ghost.org">Ghost</a> powered site to <a href="/">Gatsby.js</a>, a modern static site generator.</p>\n<h2 id="static-site-generators-as-we-know-them"><a href="#static-site-generators-as-we-know-them" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Static site generators as we know them</h2>\n<p>Jekyll, my tool of preference for quite a few years, helped me build <a href="http://devastation.tv">robust</a> <a href="http://devitconf.org">professional</a> <a href="http://skgtech.io">web presences</a> that content managers can update with the click of a button. It helped me quickly move a project of mine from idea to production by creating a landing page very fast.</p>\n<p>Static site generators like Jekyll all work pretty similarly:</p>\n<ul>\n<li>Describe your content in some common templating language (<a href="pugjs.org">Pug</a>, <a href="http://handlebarsjs.com">Handlebars</a>, etc)</li>\n<li>While in development, start a local web server and add file “watchers” that will listen for content changes and re-render the site</li>\n<li>Finally, render the whole site in static HTML and deploy. The generator will combine your files and produce a well formed HTML content.</li>\n</ul>\n<p>Let’s say you navigate to the good old site example.com:</p>\n<ul>\n<li>The browser requests the page at example.com</li>\n<li>The server responds with the HTML content</li>\n<li>The browser renders the page and loads the asset related to the script tag</li>\n<li>JS will instruct the browser to manipulate the DOM, for example, to show a “welcome to this page” popup dialog.</li>\n</ul>\n<p>A caveat here is that you have to keep the client side logic separated from the backend. The client side JS file that shows the modal dialog has nothing to do with the PUG file you wrote and eventually became HTML. The client side logic only manipulates directly the DOM.</p>\n<p>This architecture is fairly similar to a Wordpress site. A Wordpress engine also generates the HTML and serve it to the browser, after which the client side JS you wrote kicks in and starts manipulating the DOM. Wordpress’s responses can be cached, of course, and served to the client; that setup effectively makes it another static site generator with a GUI text editor.</p>\n<p>So to recap, the nice part of the static site setup is that your website is just static assets that are sitting somewhere ready to be served to user requests. No need to maintain a runtime, a database, application code, or complex optimized web servers.</p>\n<p>But the downside is you have to keep separate template files that will eventually rendered as HTML on the browser, and Javascript file that will eventually manipulate that HTML again on the browser (and CSS assets too).</p>\n<h2 id="enter-the-new-world-order"><a href="#enter-the-new-world-order" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enter the new world order</h2>\n<p>I <a href="https://kostasbariotis.com/hands-on-react-js/">started experimenting</a> with React two years ago. It came with so many features out of the box that no one ever has seen except the guys working internally on Facebook’s codebase. But the thing that stood out immediately was the way which React was handling the DOM, aka the Virtual DOM.</p>\n<p>To change a page’s display, you have to change the DOM — but changing the DOM is computationally expensive, so — slow. React is smart, and analyzes the changes you want to make so it applies only required changes, thus making the rendering much faster.</p>\n<p>If you use React with <a href="https://facebook.github.io/react/docs/react-dom-server.html">server-side rendering</a>, your flow looks something like this:</p>\n<ul>\n<li>A browser requests a page</li>\n<li>The server responds with static HTML</li>\n<li>The browser immediately renders the page so the user can see it</li>\n<li>The browser loads additional JS in the background</li>\n<li>The client takes some action, like navigating to a different route.</li>\n<li>The browser uses the additional JS to handle this action.</li>\n</ul>\n<p>On your end, the development flow looks:</p>\n<ul>\n<li>Describe your content in React.js Components</li>\n<li>During development, write code like a boss (hot reloading, modularized code, webpack plugins, etc…)</li>\n<li>Use React.js Server Side Rendering API to convert this code to static HTML content, and Javascript code, on your server</li>\n</ul>\n<p>It’s really that easy? Well, sort of.</p>\n<p>There is the need for a strong abstraction that will… * track your links across your components * parse content written in another format, like blog posts written in Markdown * generate code that will not bloat the client and will efficiently serve the content to the user.</p>\n<p>Thankfully, there are a few projects that took the initiative on this: <a href="/">Gatsby.js</a>, <a href="https://phenomic.io">Phenomic</a>, and <a href="https://nextein.now.sh">nextein</a>.</p>\n<p>At the time that I started following them, early 2017, all of them were in a very early stage and none of them could generate my site’s content the way I wanted.</p>\n<p>I wanted to make the generated site, exactly like the old one, in terms of both user experience and keeping my old routes and paths so I don’t have weird 404s.</p>\n<p>Gatsby came with client side routing out of the box and an extensive API that you can use to generate your content exactly like you need. And once Gatsby.js hit major version 1, I started using it and the result…you can <a href="https://kostasbariotis.com/">look at it</a>!</p>\n<h2 id="what-exactly-am-i-looking-at"><a href="#what-exactly-am-i-looking-at" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What exactly am I looking at?</h2>\n<p>First, if you navigate around my blog (or around this site!), you will notice that the browser doesn’t fully re-render the site. Gatsby will generate a JSON file for each route, so the browser can request only that file and React.js will render only the appropriate components.</p>\n<p>(Previously to do this required a lot of customization — I was using a technique called <a href="https://github.com/kbariotis/kostasbariotis.com__ghost-theme/blob/master/src/js/app.js#L11">pjax</a> to create the same effect. While it looked the same, it was more hack-ish; Gatsby provides this out of the box)</p>\n<p>Second, you can take a look at the <a href="https://github.com/kbariotis/kostasbariotis.com">source code</a>. Let me give you a sense of how this site is being generated. You can find all my blog posts and the main pages(<code>/</code>, <code>/about</code>, <code>/drafts</code>) of this site at <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/src/pages"><code>/src/pages</code></a>. Common components can be found at <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/src/components"><code>/src/components</code></a>. At <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/gatsby-node.js"><code>/gatsby-node.js</code></a> you can find the route it takes in order to render the site. First, it loads all posts using the GraphQL api which queries all <code>.md</code> files. Then it creates a page for each one, using the <a href="https://github.com/kbariotis/kostasbariotis.com/tree/master/src/templates/blog-post.js"><code>/src/templates/blog-post.js</code></a> template and before that it creates a page, with pagination, for all posts and tags again using the appropriate template file.</p>\n<p>During development, Gatsby will generate all of these in memory and fire up a development server that I can use to preview my site.</p>\n<p>You can try it yourself by cloning the <a href="https://github.com/kbariotis/kostasbariotis.com">source code</a> and after installing dependencies, run:</p>\n<ul>\n<li><code>npm run develop</code> to fire up the development server</li>\n<li><code>npm run build</code> to build the site (check the <code>/public</code> folder after it’s done)</li>\n</ul>\n<h2 id="an-alternative-to-html-caching"><a href="#an-alternative-to-html-caching" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>An alternative to HTML caching</h2>\n<p>Now let’s bring these threads together. Let’s say you have a Wordpress site. You’re caching the content, which is nice for performance, but you’re building on it now and want to move to a more modern web development experience.</p>\n<p>One path is the one I took — for the last three years, I was using a similar system called <a href="https://ghost.org">Ghost</a>. While it served me well, I really got tired of updating it, ssh-ing to the server, doing migrations and doing other ops required by such a stack. (There are paid hosting options, of course, but that comes with a different set of problems). So I switched to Gatsby.</p>\n<p>Another option, if you want to keep Wordpress’ Admin UI is to maintain your content, is to separate the backend from the frontend.</p>\n<p>Imagine that instead of having <a href="https://memcached.org/">memcached</a> caching your HTML in front of your WordPress site, you trigger a hook each time your database changes that will re-generate the frontend using Gatsby’s <a href="/packages/gatsby-source-wordpress/">Wordpress plugin</a>. Yes, Gatsby supports multiple backend sources to load your content. Instead of storing them inside your version control like me, you can just as well load them from your Wordpress’s MySQL database.</p>\n<p>To conclude, Gatsby will allow us to:</p>\n<ul>\n<li>serve static content without maintaining complex stacks</li>\n<li>keep a clear separation between content and the presentation layer</li>\n<li>have cool features like client side routing and hot reload on development, out of the box</li>\n<li>reuse the same code that is being used to generate the backend content at our visitors’ browsers</li>\n</ul>\n<p>I hope you will experiment with Gatsby, and let me know what you think!</p>',excerpt:"In this post, I will talk about static site generators — how they have evolved and why I switched from a  Ghost  powered site to  Gatsby.js…",timeToRead:6,fields:{slug:"/blog/2017-09-18-gatsby-modern-static-generation/"},frontmatter:{excerpt:"In this post, I will talk about static site generators -- how they have evolved and why I switched from a Ghost powered site to Gatsby.js, a modern static site generator.",image:{childImageSharp:{resize:{src:"/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-57c0c.jpg"},sizes:{base64:"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHOTRcQFf/EABcQAAMBAAAAAAAAAAAAAAAAAAECEAP/2gAIAQEAAQUCi5oUF//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAAAEQIP/aAAgBAQAGPwKDj//EABkQAQADAQEAAAAAAAAAAAAAAAEAESEQQf/aAAgBAQABPyEqtjXkZRqbvCUS2f/aAAwDAQACAAMAAAAQkM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QbH//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMYH/2gAIAQEAAT8QL7HH2zdvWGR00ztTNiE+mkNt+YAgpv/Z",aspectRatio:1.5,src:"/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-dade8.jpg",srcSet:"/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-a1caf.jpg 197w,\n/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-a92bb.jpg 393w,\n/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-dade8.jpg 786w,\n/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-73a49.jpg 1179w,\n/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-717bd.jpg 1572w,\n/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-4fadf.jpg 2358w,\n/static/code-image-7d7068e7a6f4b5a9d208d1e8e0ed9e5b-bdd38.jpg 6000w",sizes:"(max-width: 786px) 100vw, 786px"}}},date:"September 18th 2017",rawDate:"2017-09-18T00:00:00.000Z",canonicalLink:null,publishedAt:null,title:"Modern static site generation with Gatsby",imageAuthor:null,imageAuthorLink:null,imageTitle:null,showImageInArticle:null,author:{id:"Kostas Bariotis",bio:"Senior full stack engineer, @devitconf & @skgnodejs co-organizer, http://devastation.tv  host, creator of http://janitr.net & others",twitter:"@kbariotis",avatar:{childImageSharp:{resolutions:{tracedSVG:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='63' height='63' viewBox='0 0 63 63'%3E%3Crect width='100%25' height='100%25' fill='%23f6f2f8'/%3E%3Cpath d='M.7.7C-.6 2 0 7 1.4 7c.8 0 2.1.3 3 .6 1 .4 1.6 0 1.6-1 0-1.9-2.2-3.4-2.8-1.8C3 5.5 2.4 6 1.8 6c-.6 0-.7-.7-.4-1.5l1.2-3C3.2 0 2-.5.6.7M43 2c-1 1.8-.7 2 1.7 2.1h3.5c.5 0 .8.6.8 1.5 0 1-.5 1.4-1.5 1-.8-.3-1.5-.1-1.5.4 0 .6-.9 1-2 1s-2 .4-2 1c0 1 1.2 1.3 4 1 1.3 0 1.5 1 1.2 5.7a128 128 0 0 0-.3 8.7c0 2.8 0 2.8-1.3 1-.7-1-1.7-3-2-4.2-1-3.2-8.6-6.6-13-5.9-2.4.4-3.9 0-4.7-.9-1.8-2.2-5.1-1.7-7.6 1.3-1.7 2-2 2.9-1.1 3.4.7.4 1 1 .8 1.1l-4.5 3.3a21 21 0 0 1-6 3.2c-1.7.3-1.8.1-.5-.8 1.2-.9 1.2-1-.4-.5-1.5.5-1.7.2-1.3-1.4.3-1.1 0-2-.6-2-.8 0-.7-.4.1-1.2C6.6 19 6.3 18 3.9 18c-1 0-1.8.4-1.4 1 .3.4 0 1.1-.5 1.5-.6.4-.8 1-.5 1.6.4.5.1.9-.5.9s-1 1-.8 2.3c.2 1.4 1 2.2 2.2 2.2 1 0 2.1.6 2.4 1.3.2.6 1 1.2 1.8 1.2 1.5 0 2 2.5.6 3.4-.5.3-1.5 3.1-2.2 6.3-.7 3.2-1.7 6.5-2.1 7.4-.5 1-.1 3 1 5.3L5.8 56H3.5c-1.3 0-2.7.5-3 1.1-.6.8.4 1 3 .7 3-.3 3.8 0 4.5 1.8 1.2 3.2 2.7 3.4 20 3.4 13.6 0 16-.2 16-1.5 0-.8.9-1.5 2-1.5s2 .7 2 1.5c0 1 1.1 1.5 4 1.5 3.6 0 4-.3 4-2.4 0-1.4-.7-3.1-1.5-4-.8-.8-1.5-1.8-1.5-2.1 0-.4-1-2.8-2.3-5.4C48 43.6 47 31.3 49.2 30c1-.7 1-.9 0-.9-.6 0-1.2-1.2-1.2-2.6 0-1.4.4-2.3.9-2 1.2.8 2.2-2 1.5-3.9-.4-.8-.1-1.5.5-1.5s1.1-.5 1.1-1c0-2.7 6.4-6.8 7.5-5 .4.6 1.1.7 1.7.4.6-.4 1.4 0 1.9.7.6 1 .9.5.9-1.6 0-3.4-1.6-5.7-4.5-7-2-.8-2-.8-.1-1.3 1-.2 2.2.2 2.7 1 .6.9.9.2.9-2 0-3.6 0-3.6-3.8-3C50 1.9 47 2.1 47 1.1c0-1.9-2.9-1.2-4 .9m-10.3-.3c-2.2.6-1.2 2.3 1.4 2.3 1 0 1.9-.7 1.9-1.5 0-1.5-.2-1.6-3.3-.8M1 11.5c0 2 .4 3.5.9 3.5 1.1 0 2.4-4.8 1.6-6C2.2 7 1 8.2 1 11.5m7.7 4.2c-1.3 1.3-.7 2 1.8 2 2.8 0 3.3-1.2 1-2-2-.8-2-.8-2.8 0M30 16.9c-1.2.8-1.2 1.2-.2 2.5 1.7 2 3.2 2 2.5 0-.5-1-.2-1.2 1-.8.9.3 1.6.2 1.6-.4 0-.5-.7-1.3-1.6-1.6-1.9-.7-1.6-.8-3.3.3m24.6-.2c-.4.3-.7 1.5-.7 2.5s-.5 1.8-1.1 1.8c-.8 0-.7.6.2 1.6 1.2 1.5 1.4 1.2 2.1-2.1.8-3.9.7-5-.5-3.8M35 22.6c-1.2 1.4-2 2.9-1.6 3.2.4.4 1.3-.1 2-1.2.8-1 1.8-1.5 2.4-1.1.7.3 1.1-.2 1.1-1.4 0-2.8-1.2-2.6-3.9.5m19.3 7c.3.7-.1 1.4-1 1.6-2.7.6.2 2.6 4.8 3.2l4.8.7-.3-3.2c-.3-3.4-2.7-5.4-2.7-2.2 0 1.6-.2 1.6-1.3.2-1.4-1.9-5-2.1-4.3-.3' fill='%23e0d6eb' fill-rule='evenodd'/%3E%3C/svg%3E",width:63,height:63,src:"/static/kostas-bariotis-7ff92434b110dc92f5571b4841d111b1-4a2e8.jpg",srcSet:"/static/kostas-bariotis-7ff92434b110dc92f5571b4841d111b1-4a2e8.jpg 1x,\n/static/kostas-bariotis-7ff92434b110dc92f5571b4841d111b1-53944.jpg 1.5x,\n/static/kostas-bariotis-7ff92434b110dc92f5571b4841d111b1-bd4ff.jpg 2x,\n/static/kostas-bariotis-7ff92434b110dc92f5571b4841d111b1-6257f.jpg 3x"}}},fields:{slug:"/contributors/kostas-bariotis/"}}}}},pathContext:{slug:"/blog/2017-09-18-gatsby-modern-static-generation/",prev:{fields:{slug:"/blog/2017-09-13-why-is-gatsby-so-fast/",package:null},frontmatter:{title:"Web Performance 101—also, why is Gatsby so fast?",draft:null,canonicalLink:null,publishedAt:null}},next:{fields:{slug:"/blog/2017-09-21-community-roundup-1/",package:null},frontmatter:{title:"Community Roundup #1",draft:null,canonicalLink:null,publishedAt:null}}}}}});
//# sourceMappingURL=path---blog-2017-09-18-gatsby-modern-static-generation-6680fbe873201cded37e.js.map