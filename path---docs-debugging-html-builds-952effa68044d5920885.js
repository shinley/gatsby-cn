webpackJsonp([0xdc11ad6966b6],{621:function(n,s){n.exports={data:{markdownRemark:{html:'<p>构建静态HTML文件时出现错误通常有两个原因。</p>\n<ol>\n<li>\n<p>一些代码引用“browser globals”，如窗口或文档。 如果这是你的问题，你应该看到上面的错误，如“window is not defined”. 为了解决这个问题，找到有问题的代码，然后： a）在调用代码之前检查是否定义了窗口，这样在构建gatsby时代码不会运行（参见下面的代码示例）或者 b）如果代码在 一个React.js组件，将代码移动到“componentDidMount”中，确保代码不会运行，除非它在浏览器中。</p>\n</li>\n<li>\n<p>检查您的网页目录（和任何子目录）中列出的每个JS文件是否正在导出React组件或字符串。 Gatsby将页面目录下列出的任何JS文件视为页面组件，因此它必须具有默认的导出组件或字符串。</p>\n</li>\n<li>\n<p>其他一些原因:-)＃1是构建静态文件失败的最常见原因。 如果这是另外一个原因，那么在解决问题时就必须更有创意。</p>\n</li>\n</ol>\n<h2 id="如何检查窗口是否被定义"><a href="#%E5%A6%82%E4%BD%95%E6%A3%80%E6%9F%A5%E7%AA%97%E5%8F%A3%E6%98%AF%E5%90%A6%E8%A2%AB%E5%AE%9A%E4%B9%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如何检查窗口是否被定义</h2>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment">// Requiring function causes error during builds</span>\n<span class="token comment">// as the code tries to reference window</span>\n<span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;module&apos;</span><span class="token punctuation">)</span> <span class="token comment">// Error</span>\n\n<span class="token comment">// Wrap the require in check for window</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token template-string"><span class="token string">`undefined`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;module&apos;</span><span class="token punctuation">)</span> <span class="token comment">// Error</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<h2 id="解决第三方模块问题"><a href="#%E8%A7%A3%E5%86%B3%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解决第三方模块问题</h2>\n<p>所以，最糟糕的事情发生了，你正在使用一个NPM模块，期望窗口被定义。 您可能能够提交问题并获取模块修补程序，但是同时要执行哪些操作？</p>\n<p>一个解决方案是定制你的<a href="../add-custom-webpack-config">webpack</a>配置，以在服务器渲染期间用伪模块替换违规模块。</p>\n<p>项目根目录下的gatsby-node.js：</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">modifyWebpackConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> config<span class="token punctuation">,</span> stage <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>stage <span class="token operator">===</span> <span class="token string">&apos;build-html&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    config<span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">&apos;null&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      test<span class="token punctuation">:</span> <span class="token regex">/bad-module/</span><span class="token punctuation">,</span>\n      loader<span class="token punctuation">:</span> <span class="token string">&apos;null-loader&apos;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>',excerpt:"构建静态HTML文件时出现错误通常有两个原因。 一些代码引用“browser globals”，如窗口或文档。 如果这是你的问题，你应该看到上面的错误，如“window is not defined”. 为了解决这个问题，找到有问题的代码，然后： a…",timeToRead:1,frontmatter:{title:"调试HTML构建"},parent:{__typename:"File",relativePath:"docs/debugging-html-builds.md"}}},pathContext:{slug:"/docs/debugging-html-builds/"}}}});
//# sourceMappingURL=path---docs-debugging-html-builds-952effa68044d5920885.js.map